{% extends "base.html" %}
{% block page_content %}

<style>
    p#title {
        font-size: 50px;
        background-color: #006666;
        padding-left: 20px;
        color: white;
    }
    table, th, td {
        border: 2px solid black;
    }
    table {
        width: 100%;
    }

    caption {
        font-size: 24px;
    }
    td, th {
        font-size: 24px;
        padding-left: 10px;
    }

    td#month {
        width: 70%;
        padding: 5px;
    }
    .fa {
        font-size:32px;
        color: orange;
    }
    .btn {
        font-size: 24px;
    }
</style>

<p id="title"> <b> Verwaltung der Stempelzeiten</b></p>

<hr>
<div class="row">
    <div class="col-sm-6">
        <h3> Aktuelles Datum: <b>{{ moment().format('DD.MM.YYYY') }}</b> </h3>
    </div>
    {% if current_user.is_owner() %}
        {% if current_date %}
        <div class="col-sm-6 text-right">
            <a data-toggle="tooltip" title="Aktuellen Monat anzeigen" role="button" class="btn btn-success btn-lg"
               href="{{ url_for('admin.control_with_year_and_month', year=current_date[0]
               , month=current_date[1]) }}"> Aktueller Monat </a>
        </div>
        {% endif %}
    {% endif %}
</div>
<hr>
<div class="current">
    {% if today %}
    <table>
        <caption> Eingestempelte Benutzer </caption>
        <th> Identifikation </th>
        <th> Vorname </th>
        <th> Nachname </th>
        <th> Eingestempelt </th>
        <th> Vergangene Zeit </th>
        <th> Aktionen </th>
        {% for elem in today %}

                        <tr align="center">
                            <td><p> {{ elem[0].uuid }} </p></td>
                            <td><p> {{ elem[0].firstname }} </p></td>
                            <td><p> {{ elem[0].lastname }} </p></td>
                            <td><p> {{ elem[1] }} </p></td>
                            <td><p> {{ elem[2] }} </p></td>
                            <td>
                                {% if current_user.is_manager() %}
                                        <a href="{{ url_for('admin.clock_out', name=elem[0].username ) }}">
                                            <i title="Ausstempeln" class="fa" >&#xf044;</i>
                                        </a>
                                {% endif %}
                            </td>
                        </tr>

        {% endfor %}
    </table>
    {% else %}
    <h3>Keine Nutzer, die im Augenblick eingestempelt haben</h3>
    {% endif %}
</div>
{% if current_user.is_owner() %}
    <hr>
    <div class="row">
        <div class="col-sm-12">
            <table >
                <caption> Stempelzeiten </caption>
                <thead>
                    <th> Jahr </th>
                    <th> Monate </th>
                </thead>
                <tbody>
                {% for year in years %}
                    <tr>
                        <td > {{ year[0] }} </td>
                        <td id="month">
                            {% if year %}
                                {% for month in year[1] %}
                                        <a  role="button" class="btn btn-info btn-sm" href=
                                            "{{ url_for('admin.control_with_year_and_month', year=year[0], month=month) }} ">
                                            {{ month }} </a>

                                {% endfor %}
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
{% endif %}
{% endblock page_content %}