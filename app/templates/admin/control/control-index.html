{% extends "base.html" %}
{% block page_content %}

<h1>Arbeitszeiten Verwalten</h1>
<hr style="color:black;width:50%;border:solid;text-align:left;margin-left:0">
<hr>
<div class="row">
    <div class="col-sm-6">
        <h3> Aktuelles Datum: <b>{{ moment().format('DD.MM.YYYY') }}</b> </h3>
    </div>
    <div class="col-sm-6 text-right">
        <form method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <input class="btn btn-primary btn-lg" type="submit" name="current_month" value="Stempelzeiten im Aktuellen Monat" />
        </form>
    </div>
</div>
<hr>
<div class="current">
    {% if users %}
    <h3> Alle Benutzer, die gerade eingeloggt sind:</h3>
    <table border="1" width="100%" >
        <th> Identifikation </th>
        <th> Vorname </th>
        <th> Nachname </th>
        <th> Aktionen </th>
        {% for user in users %}
            {% if current_user.role.permissions >= user.role.permissions %}
                {% if user.user_id != current_user.user_id %}
                    {% if user.is_clocked %}
                        <tr align="center">
                            <td><p> {{ user.uuid }} </p></td>
                            <td><p> {{ user.firstname }} </p></td>
                            <td><p> {{ user.lastname }} </p></td>
                            <td>
                                {% if current_user.is_manager() %}
                                        <a href="{{ url_for('admin.clock_out', name=user.username ) }}">
                                            <i title="Ausstempeln" class="fa" style="font-size:24px;color=black;">&#xf044;</i>
                                        </a>
                                {% endif %}
                            </td>
                        </tr>
                    {% endif %}
                {% endif %}
            {% endif %}
        {% endfor %}
    </table>
    {% else %}
    <h3>Keine Nutzer, die im Augenblick eingeloggt sind</h3>
    {% endif %}
</div>
<hr style="color:black;width:50%;border:solid;text-align:left;margin-left:0">

<div class="row">
    <div class="col-sm-6 text-left">
        <ul>
            {% for element in controls %}
            <li>{{ element.time_start }} - {{ element.time_end }}</li>
            {% endfor %}
        </ul>
    </div>
    <div class="col-sm-6 text-left">
        <form method="post">
                <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                <input class="btn btn-success btn-lg" type="submit" name="current_month" value="2020" />
        </form>
    </div>
</div>

{% endblock page_content %}